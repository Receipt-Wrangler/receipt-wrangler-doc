"use strict";(self.webpackChunkreceipt_wrangler_doc=self.webpackChunkreceipt_wrangler_doc||[]).push([[6992],{32895:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>d});var i=n(74848),s=n(28453);const a={},r="Prompts",o={id:"concepts/system-settings/prompts",title:"Prompts",description:"Prompts allow Administrators to configure prompts, to be used within receipt processing settings to communicate with the",source:"@site/versioned_docs/version-5.x/concepts/system-settings/03-prompts.md",sourceDirName:"concepts/system-settings",slug:"/concepts/system-settings/prompts",permalink:"/docs/concepts/system-settings/prompts",draft:!1,unlisted:!1,tags:[],version:"5.x",sidebarPosition:3,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Receipt Processing Settings",permalink:"/docs/concepts/system-settings/receipt-processing-settings"},next:{title:"System Emails",permalink:"/docs/concepts/system-settings/system-email"}},l={},d=[{value:"Viewing Prompts",id:"viewing-prompts",level:2},{value:"Header Buttons",id:"header-buttons",level:3},{value:"Add Prompt",id:"add-prompt",level:4},{value:"Add Default Prompt",id:"add-default-prompt",level:4},{value:"Actions",id:"actions",level:3},{value:"Edit",id:"edit",level:4},{value:"Duplicate",id:"duplicate",level:4},{value:"Delete",id:"delete",level:4},{value:"Managing Prompts",id:"managing-prompts",level:2},{value:"Header Buttons",id:"header-buttons-1",level:2},{value:"Fields",id:"fields",level:2},{value:"Name",id:"name",level:3},{value:"Description",id:"description",level:3},{value:"Prompt",id:"prompt",level:3},{value:"Prompting",id:"prompting",level:2},{value:"Default Prompt",id:"default-prompt",level:3},{value:"Structural Requirements",id:"structural-requirements",level:3},{value:"Variables",id:"variables",level:3},{value:"@categories",id:"categories",level:4},{value:"@tags",id:"tags",level:4},{value:"@ocrText",id:"ocrtext",level:4},{value:"@currentYear",id:"currentyear",level:4},{value:"Use Cases",id:"use-cases",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"prompts",children:"Prompts"})}),"\n",(0,i.jsx)(t.p,{children:"Prompts allow Administrators to configure prompts, to be used within receipt processing settings to communicate with the\nconfigured AI."}),"\n",(0,i.jsx)(t.p,{children:'To access prompts, log in as an administrator, and then click on the avatar menu, and then click the "System Settings"\nbutton, as shown below.\nThen click on the "Prompts" tab.'}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"System Settings",src:n(10787).A+"",width:"3840",height:"2048"})}),"\n",(0,i.jsx)(t.h2,{id:"viewing-prompts",children:"Viewing Prompts"}),"\n",(0,i.jsx)(t.p,{children:"Once the user has navigated to the prompts tab, they will be presented with a table containing the existing prompts."}),"\n",(0,i.jsx)(t.h3,{id:"header-buttons",children:"Header Buttons"}),"\n",(0,i.jsx)(t.h4,{id:"add-prompt",children:"Add Prompt"}),"\n",(0,i.jsx)(t.p,{children:"This allows the user to add a new prompt."}),"\n",(0,i.jsx)(t.h4,{id:"add-default-prompt",children:"Add Default Prompt"}),"\n",(0,i.jsx)(t.p,{children:"Add Default Prompt (not pictured): This allows the user to add the default prompt, if it does not exist already. If it\nalready exists, the button will not be displayed."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Prompts",src:n(56538).A+"",width:"3840",height:"2047"})}),"\n",(0,i.jsx)(t.p,{children:"Each of the columns can be sorted by clicking on the column header, either ascending or descending, except for the\nactions column."}),"\n",(0,i.jsx)(t.h3,{id:"actions",children:"Actions"}),"\n",(0,i.jsx)(t.h4,{id:"edit",children:"Edit"}),"\n",(0,i.jsx)(t.p,{children:"This allows the user to edit the prompt."}),"\n",(0,i.jsx)(t.h4,{id:"duplicate",children:"Duplicate"}),"\n",(0,i.jsx)(t.p,{children:"This allows the user to duplicate the prompt."}),"\n",(0,i.jsx)(t.h4,{id:"delete",children:"Delete"}),"\n",(0,i.jsx)(t.p,{children:"This allows the user to delete the prompt, as long as it is not used in any receipt processing settings. Otherwise, a\nsnackbar will be displayed that informs the user what the prompt is currently related to."}),"\n",(0,i.jsx)(t.h2,{id:"managing-prompts",children:"Managing Prompts"}),"\n",(0,i.jsx)(t.p,{children:"To manage prompts, click on the name hyperlink of the prompts you wish to view, or click the edit button in the actions\ncolumn."}),"\n",(0,i.jsx)(t.p,{children:"The following form will be displayed:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Prompts",src:n(45745).A+"",width:"3840",height:"2047"})}),"\n",(0,i.jsx)(t.h2,{id:"header-buttons-1",children:"Header Buttons"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Edit: This allows the user to edit the prompt. This button is only visible when in view mode."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"fields",children:"Fields"}),"\n",(0,i.jsx)(t.h3,{id:"name",children:"Name"}),"\n",(0,i.jsx)(t.p,{children:"This is the name of the prompt."}),"\n",(0,i.jsx)(t.h3,{id:"description",children:"Description"}),"\n",(0,i.jsx)(t.p,{children:"This is the description of the prompt."}),"\n",(0,i.jsx)(t.h3,{id:"prompt",children:"Prompt"}),"\n",(0,i.jsx)(t.p,{children:"This is the prompt that will be used in the receipt processing settings."}),"\n",(0,i.jsx)(t.h2,{id:"prompting",children:"Prompting"}),"\n",(0,i.jsx)(t.p,{children:"Allowing administrators to configure prompts of their own, allows a huge amount of flexibility, and power into the\nsystem. The main caveat to keep in mind while prompting, is that these are global prompts, so we cannot assign prompts\nto groups yet for more specific prompts. However, the prompting logic will remain the same."}),"\n",(0,i.jsx)(t.p,{children:"Before getting into different use cases, lets take a look at how prompting in Receipt Wrangler works."}),"\n",(0,i.jsx)(t.h3,{id:"default-prompt",children:"Default Prompt"}),"\n",(0,i.jsx)(t.p,{children:"This is the default prompt, that was used previously in Receipt Wrangler, and as mentioned earlier in the documentation,\nit is createdable by a button on the prompts page."}),"\n",(0,i.jsx)(t.p,{children:"It is also created during the config import process."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-text",metastring:'title="Default Prompt"',children:'Find the receipt\'s name, total cost, and date. Format the found data as:\n{\n    "name": store name,\n    "amount": amount as a number,\n    "date": date in ISO 18601 format in UTC with ALL time values set as 0,\n    "categories": categories,\n    "tags": tags\n}\nIf a store name cannot be confidently found, use \'Default store name\' as the default name.\nOmit any value if not found with confidence. Assume the date is in the year @currentYear if not provided.\nThe amount must be a float or integer.\n\nPlease do NOT add any additional information, only valid JSON.\nPlease return the json in plaintext ONLY, do not ever return it in a code block or any other format.\n\nChoose up to 2 categories from the given list based on the receipt\'s items and store name. If no categories fit, please return an empty array for the field and do not select any categories. When selecting categories, select only the id, like:\n{\n    Id: category id\n}\n\nEmphasize the relationship between the category and the receipt, and use the description of the category to fine tune the results. Do not return categories that have an empty name or do not exist.\n\n\nCategories: @categories\n\nFollow the same process as described for categories for tags.\n\nTags: @tags\n\nReceipt text: @ocrText\n'})}),"\n",(0,i.jsx)(t.p,{children:"There are a few things to note in the default prompt:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"The structure that Receipt Wrangler is expecting"}),"\n",(0,i.jsx)(t.li,{children:"The variables that are available"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"structural-requirements",children:"Structural Requirements"}),"\n",(0,i.jsxs)(t.p,{children:["Receipt Wrangler is expecting the AI to return JSON in a specific format. The full format can be\nfound ",(0,i.jsx)(t.a,{href:"/api/#tag/Receipt/operation/createReceipt",children:"in the API documentation"}),". The API documentation will also cover which\nfields are required, and which are optional."]}),"\n",(0,i.jsx)(t.p,{children:"Additionally, the dates MUST be in ISO 18601 format, or the date will not be parsed correctly."}),"\n",(0,i.jsx)(t.p,{children:"In summary the requirements are:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["The format must be in JSON, and in the format\nspecified ",(0,i.jsx)(t.a,{href:"/api/#tag/Receipt/operation/createReceipt",children:"in the API documentation"}),"."]}),"\n",(0,i.jsx)(t.li,{children:"The date MUST be in ISO 18601 format."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"If the above conditions are not met, Receipt Wrangler will not be able to parse the data correctly, and any Quick Scans,\nMagic Fills, or Email Integrations will fail."}),"\n",(0,i.jsx)(t.h3,{id:"variables",children:"Variables"}),"\n",(0,i.jsx)(t.p,{children:"When prompts, administrators will have variables available for them to use. Below is the full list of variables that are\navailable. These variables are replaced with the actual data when the prompt is used."}),"\n",(0,i.jsx)(t.h4,{id:"categories",children:"@categories"}),"\n",(0,i.jsxs)(t.p,{children:["This will use the full list of categories that are available in the system. The format of the categories is as\nshown ",(0,i.jsx)(t.a,{href:"/api/#tag/Category/operation/getAllCategories",children:"in the API documentation"}),"."]}),"\n",(0,i.jsx)(t.h4,{id:"tags",children:"@tags"}),"\n",(0,i.jsxs)(t.p,{children:["This will use the full list of tags that are available in the system. The format of the tags is as\nshown ",(0,i.jsx)(t.a,{href:"/api/#tag/Tag/operation/getAllTags",children:"in the API documentation"}),"."]}),"\n",(0,i.jsx)(t.h4,{id:"ocrtext",children:"@ocrText"}),"\n",(0,i.jsx)(t.p,{children:"This will use the OCR text that was extracted from the receipt."}),"\n",(0,i.jsx)(t.h4,{id:"currentyear",children:"@currentYear"}),"\n",(0,i.jsx)(t.p,{children:"This will use the current year in the UTC timezone."}),"\n",(0,i.jsx)(t.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,i.jsx)(t.p,{children:"Some uses cases for custom prompts are:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Attempting to itemize all items on a receipt"}),"\n",(0,i.jsx)(t.li,{children:"Attempting to itemize, and split all items on a receipt"}),"\n",(0,i.jsx)(t.li,{children:"Figuring out who paid the receipt based on the content of the receipt (perhaps by card number, maybe store name, etc.)"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Here is an example prompt, of itemizing all items on a receipt by adjusting the prompt."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-text",metastring:'title="Itemize all items on a receipt"',children:'Find the receipt\'s name, total cost, and date. Format the found data as:\n{\n    "name": store name,\n    "amount": amount as a number,\n    "date": date in ISO 18601 format in UTC with ALL time values set as 0,\n    "categories": categories,\n    "tags": tags,\n    "receiptItems": items,\n}\nIf a store name cannot be confidently found, use \'Default store name\' as the default name.\nOmit any value if not found with confidence. Assume the date is in the year @currentYear if not provided.\nThe amount must be a float or integer.\n\nPlease do NOT add any additional information, only valid JSON.\nPlease return the json in plaintext ONLY, do not ever return it in a code block or any other format.\n\nChoose up to 2 categories from the given list based on the receipt\'s items and store name. If no categories fit, please return an empty array for the field and do not select any categories. When selecting categories, select only the id, like:\n{\n    Id: category id\n}\n\nEmphasize the relationship between the category and the receipt, and use the description of the category to fine tune the results. Do not return categories that have an empty name or do not exist.\n\nPlease itemize all items on the receipt.\nUse the key: \'receiptItems\' in the resulting JSON.\nThe items should be in the format:\n[\n    {\n        "name": item name,\n        "amount": item cost as a number,\n        "name": name of the item as a string,\n        "status": "DRAFT",\n        "chargedToUserId": 1\n    }\n]\n\nWhen itemizing the receipt, please make sure that the total sum of the items does not exceed the total amount of the receipt.\n\n\nCategories: @categories\n\nFollow the same process as described for categories for tags.\n\nTags: @tags\n\nReceipt text: @ocrText\n'})}),"\n",(0,i.jsx)(t.p,{children:"It is a decent starting point in understanding how prompts work, but it needs a more robust way to assign items to\nusers, at least in a multi-user environment."})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},45745:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/form-edit-57b30085c7541d7c67748af42395fce6.png"},56538:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/table-007551dd238b69abcd7e5c01af8f33e2.png"},10787:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/system-settings-arrow-a5bd1af841f1a7fa152cd7d20fd30be4.png"},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var i=n(96540);const s={},a=i.createContext(s);function r(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);