"use strict";(self.webpackChunkreceipt_wrangler_doc=self.webpackChunkreceipt_wrangler_doc||[]).push([[8026],{24929:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>d});var i=n(74848),o=n(28453);const s={},a="4.x to 5.x Migration Guide",r={id:"migration-guide",title:"4.x to 5.x Migration Guide",description:"Before upgrading to version 5.x, please read and follow along with the guide to ensure a smooth transition.",source:"@site/versioned_docs/version-5.x/migration-guide.md",sourceDirName:".",slug:"/migration-guide",permalink:"/docs/migration-guide",draft:!1,unlisted:!1,tags:[],version:"5.x",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Mobile",permalink:"/docs/development/mobile"}},l={},d=[{value:"What gets migrated?",id:"what-gets-migrated",level:2},{value:"Steps to migrate",id:"steps-to-migrate",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"4x-to-5x-migration-guide",children:"4.x to 5.x Migration Guide"}),"\n",(0,i.jsx)(t.p,{children:"Before upgrading to version 5.x, please read and follow along with the guide to ensure a smooth transition."}),"\n",(0,i.jsx)(t.h2,{id:"what-gets-migrated",children:"What gets migrated?"}),"\n",(0,i.jsx)(t.p,{children:"The data that is eligible to be migrated from the config is:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"aiSettings: aiSettings will get migrated to Receipt Processing Settings, and will be set as the global settings to use\nin system settings."}),"\n",(0,i.jsx)(t.li,{children:"emailSettings: Valid email settings will be migrated to the new system email settings, and any Group Settings that\nused\nthe configured email will also be updated to use the newly imported system email."}),"\n",(0,i.jsx)(t.li,{children:"emailPollingInterval: The email polling interval will be migrated to the new system settings."}),"\n",(0,i.jsx)(t.li,{children:"features: aiPoweredReceipts does not get migrated, as this value is now derived from whether there is a receipt\nprocessing settings set in system settings, but enableLocalSignUp will be migrated."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"steps-to-migrate",children:"Steps to migrate"}),"\n",(0,i.jsx)(t.admonition,{type:"warning",children:(0,i.jsx)(t.p,{children:'For mariadb/mysql users, the host, and port number have now been separated. Previously, the "host" field in the config\nwould look something like: "db:3306", but now host would be "db", and port would be 3306.'})}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["The database configuration has moved from the config file, to environment variables. So we need to move the db\ncredentials from config.prod.json, to environment variables. Take a look at\nthe ",(0,i.jsx)(t.a,{href:"/docs/category/configuration-examples",children:"example docker compose files"})," for examples depending on your db\nconfiguration. In the end it should look very similar to one of the examples."]}),"\n",(0,i.jsxs)(t.li,{children:["Back in the docker compose file, add the ENCRYPTION_KEY, and SECRET_KEY environment variables. These are required for\nthe app to start. Check out the\n",(0,i.jsx)(t.a,{href:"/docs/configuration/environment-variables",children:"configuration documentation"})," for more information on these variables."]}),"\n",(0,i.jsxs)(t.li,{children:["Pull the latest version of all the of the containers. If you are using versioned containers, the latest version will\nbe the  ",(0,i.jsx)(t.code,{children:"v5.0.0"})," tag."]}),"\n",(0,i.jsx)(t.li,{children:"Start the docker compose stack, and check the logs to ensure everything is starting correctly."}),"\n",(0,i.jsx)(t.li,{children:'Before leaving the terminal, copy the contents of, "config.prod.json"  and save it to a json file, we will be using\nthis later.'}),"\n",(0,i.jsx)(t.li,{children:"Log in to the desktop app as an administrator."}),"\n",(0,i.jsxs)(t.li,{children:['Click on user avatar menu, then on "Imports" as pictured\nbelow: ',(0,i.jsx)(t.img,{alt:"User Avatar",src:n(38565).A+"",width:"3840",height:"2048"})]}),"\n",(0,i.jsxs)(t.li,{children:["Click on the upload button, and select your config file from\nearlier. ",(0,i.jsx)(t.img,{alt:"Import Dialog",src:n(1083).A+"",width:"3840",height:"2048"})]}),"\n",(0,i.jsxs)(t.li,{children:["Your file contents will now appear in the dialog, please confirm that the content is\ncorrect. If so, click the green check mark button at the bottom of the\ndialog. ",(0,i.jsx)(t.img,{alt:"Uploaded Config",src:n(91436).A+"",width:"3840",height:"2047"})]}),"\n",(0,i.jsxs)(t.li,{children:["Your settings should now be imported, and you can now start using the app. Check the System Settings by clicking the\navatar menu, and everything that you had configured should show up in their respective places. Check out\nthe ",(0,i.jsx)(t.a,{href:"/docs/concepts/system-settings",children:"System Settings"})," documentation to learn more about this new area of the app."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},1083:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/import-dialog-cd288357be6fc5230ca2de29606f546d.png"},38565:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/menu-with-arrow-on-import-215edaf5696dddb60d6c829cb8667766.png"},91436:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/uploaded-config-126d151143b2e660b9a254e00ec15031.png"},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>r});var i=n(96540);const o={},s=i.createContext(o);function a(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);